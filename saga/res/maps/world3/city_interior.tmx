<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" renderorder="right-down" width="100" height="54" tilewidth="16" tileheight="16" backgroundcolor="#808080" nextobjectid="326">
 <properties>
  <property name="bgm" value="ffl3_town2"/>
  <property name="name" value="City of Angels"/>
 </properties>
 <tileset firstgid="1" source="../tilesets/lower.tsx"/>
 <tileset firstgid="176" source="../tilesets/upper.tsx"/>
 <layer name="Tile Layer 1" width="100" height="54">
  <properties>
   <property name="z" value="0"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAC+2bTW7jMAyF2SN010P4AF3PKrtcKqsAmaxmleldp0ZHKKGK1CNNO0ysBxBoZfvp57MtynbORHTeOBDt2f+3ENo27/5L+xPpj3hF8JB8pfI/Qszb/hoC2X8pj0h/xCuCR+17+YyrUp/G42QIZP+lPKZOWPwRrwgete/tMz6U+rTzIwuPd6FvW/F4pzgePF7+B6/vIAQ6/5yqv/n/x8b+aH/4vfWVvq7xLXlcqvqt8xNnKF3rFh68PVLMY3Si73ti4VHueUf6eQ9E+8Ov1TdqX+Nr8rhV9Vvnp8JQGjcrD94eKeYxOtH3PbHwKNuP9PMeiPanN15r81jqXxhK42blYZk76tDugWh/Hp0H4jd43N9fmufnsl8rBufAy5f251F49GJqlEnn8Zph7U+r3dr2DP6IpkZZ1uuD53YT6Tke335N4o+oxSPr/MFzu4n0HI9v/0ji71VWHnsVsj5vrbF7MXj4hKzPj2R77n5VPAcPXcj6vF5jI2v2wcOnrXPewUPX4JFLg0cutfIiay7Vy7PqMk+7LPHI/vU7jgPZcqle1H7o+vZsqCNivCx1Rbefe9fvOA5ky6V6Ufuh69uzoY4IHpa6ottv9b6H5rZZnrku5ZHh+fEz8fB+b4B+JzF4fMUr9ft2Id/3Buh3ErwdFn9+DO+DVpZVpX1v1OdxI9/3Buh3ErwdFn9+DGd+UcqyKtP9PWJ+4sxvSllWPRuPlucjzh+DR99biyg9G4/I8Su5SNTaFa1z7T6t6e8V2gbPOnlJf5BvVaV3YRn8vULOffTaRr0QId+qSu/CMvh7hZz7hceLEpPBa0gWcu5beETNt3uVNtZLeGj7DMmy8ECvo8HDrx6PVn6k5eaI35AslAfP9zgPnjdG8tjz+kMbv/q3ufWzUJ43ln2jeHjWB1n8verxkH6b2wq+bwQPz/ogi79XyHyuzdGWfdd6vrT286st8/XBIycPrX5Lvov4RbSL11e/F0X9W8dn4IGEhUdU/oPWx9+Lenjw4+/Nw6tpZX8Lj8h8d/Boa/DIpcEjlwaPXEJzg2geUf7Ppr2+r82qvb6v/Qd/cOBOYFQAAA==
  </data>
 </layer>
 <layer name="Tile Layer 2" width="100" height="54">
  <properties>
   <property name="z" value=".5"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAC+3asQrCMBCA4eQJXF111Dd1FhfxMYROPkEXV99AHV0dbNFAjJRYmya5+H9wXKnYhKa9gJ5SAADEV6eeAJK6eAJAOGf1fK+uqSfyso483ibyeNJsI4+3izweMMRcKzXT42Sb/RkgyTfPd19d7wf8Fs19WurPPIT7/RDXBFKphF+/RGP+Nsh65IX1yAvrAQAA8H9qJwMA5HP7rHLpB0E4vt46euwAILxb6gngzT31BADBJlqpo5PRT8je+2lz/09ORj+VFShLW59MUK/Sa+uTCerVb6hXeQm5n9t1yhxLsfdkiew6ZY6lOHgy4Fo50XUO5eJ/IrRK3M8lYz8HAEjzAOYmQ7VgVAAA
  </data>
 </layer>
 <objectgroup name="Object Layer 1">
  <object id="244" name="station_left" type="Target" x="64" y="336" width="16" height="16"/>
  <object id="245" name="station_right" type="Target" x="384" y="336" width="16" height="16"/>
  <object id="246" name="house" type="Target" x="1520" y="160" width="16" height="16"/>
  <object id="247" name="inn_right" type="Target" x="1168" y="176" width="16" height="16"/>
  <object id="248" name="inn_left" type="Target" x="1040" y="176" width="16" height="16"/>
  <object id="249" name="store_left" type="Target" x="656" y="176" width="16" height="16"/>
  <object id="250" name="store_right" type="Target" x="784" y="176" width="16" height="16"/>
  <object id="251" name="palace" type="Target" x="224" y="736" width="16" height="16"/>
  <object id="252" name="store_f1_up" type="Target" x="672" y="80" width="16" height="16"/>
  <object id="253" name="store_f2_down" type="Target" x="640" y="416" width="16" height="16"/>
  <object id="254" name="store_f2_up" type="Target" x="800" y="416" width="16" height="16"/>
  <object id="255" name="store_f3_down" type="Target" x="784" y="720" width="16" height="16"/>
  <object id="256" name="inn_f3_down" type="Target" x="1040" y="720" width="16" height="16"/>
  <object id="257" name="inn_f2_up" type="Target" x="1024" y="416" width="16" height="16"/>
  <object id="258" name="inn_f2_down" type="Target" x="1184" y="416" width="16" height="16"/>
  <object id="259" name="inn_f1_up" type="Target" x="1184" y="80" width="16" height="16"/>
  <object id="260" name="house_up" type="Target" x="1392" y="96" width="16" height="16"/>
  <object id="261" name="house_down" type="Target" x="1392" y="416" width="16" height="16"/>
  <object id="262" name="tele" type="Event" x="64" y="352" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'station_left')"/>
   </properties>
  </object>
  <object id="263" name="tele" type="Event" x="384" y="352" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'station_right')"/>
   </properties>
  </object>
  <object id="264" name="tele" type="Event" x="224" y="752" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'palace')"/>
   </properties>
  </object>
  <object id="265" name="tele" type="Event" x="656" y="192" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'store_left')"/>
   </properties>
  </object>
  <object id="266" name="tele" type="Event" x="784" y="192" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'store_right')"/>
   </properties>
  </object>
  <object id="267" name="tele" type="Event" x="1040" y="192" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'inn_left')"/>
   </properties>
  </object>
  <object id="268" name="tele" type="Event" x="1168" y="192" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'inn_right')"/>
   </properties>
  </object>
  <object id="269" name="tele" type="Event" x="1520" y="176" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city.tmx', 'house')"/>
   </properties>
  </object>
  <object id="270" name="tele" type="Event" x="1392" y="80" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'house_down')"/>
   </properties>
  </object>
  <object id="271" name="tele" type="Event" x="1392" y="432" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'house_up')"/>
   </properties>
  </object>
  <object id="272" name="tele" type="Event" x="1184" y="64" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'inn_f2_down')"/>
   </properties>
  </object>
  <object id="273" name="tele" type="Event" x="1184" y="432" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'inn_f1_up')"/>
   </properties>
  </object>
  <object id="274" name="tele" type="Event" x="1024" y="400" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'inn_f3_down')"/>
   </properties>
  </object>
  <object id="275" name="tele" type="Event" x="1040" y="736" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'inn_f2_up')"/>
   </properties>
  </object>
  <object id="276" name="tele" type="Event" x="784" y="736" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'store_f2_up')"/>
   </properties>
  </object>
  <object id="277" name="tele" type="Event" x="800" y="400" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'store_f3_down')"/>
   </properties>
  </object>
  <object id="278" name="tele" type="Event" x="640" y="432" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'store_f1_up')"/>
   </properties>
  </object>
  <object id="279" name="tele" type="Event" x="672" y="64" width="16" height="16">
   <properties>
    <property name="onCollide" value="targetTele('world3/city_interior.tmx', 'store_f2_down')"/>
   </properties>
  </object>
  <object id="280" name="inn" type="Character" x="1040" y="96" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="onInteract" value="inn()"/>
   </properties>
  </object>
  <object id="281" name="npc" type="Character" x="1072" y="496" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="NORTH"/>
    <property name="onInteract" value="play('world3/barkeep.lua')"/>
   </properties>
  </object>
  <object id="282" name="npc" type="Character" x="1104" y="432" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_f"/>
    <property name="face" value="NORTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('The machine that opens the gates was developed at the research base on an island south of here.')"/>
   </properties>
  </object>
  <object id="283" name="npc" type="Character" x="1056" y="416" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="EAST"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('The monorail connects the City of Angels to Ermengarde in the east and to the power plant to the west.')"/>
   </properties>
  </object>
  <object id="284" name="npc" type="Character" x="1104" y="384" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_mutant_m"/>
    <property name="face" value="SOUTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('The town of Celephais is in the middle of the continent. Everyone there works in the plutonium mines.')"/>
   </properties>
  </object>
  <object id="285" name="npc" type="Character" x="1072" y="384" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_mutant_f"/>
    <property name="face" value="SOUTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('A cave network connects Ermengarde to the continent, but nowadays everyone just takes the monorail.')"/>
   </properties>
  </object>
  <object id="286" name="npc" type="Character" x="1152" y="448" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="face" value="WEST"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('With the push for nuclear power, the coal mines in the northwest are abandoned now.')"/>
   </properties>
  </object>
  <object id="287" name="lucifer" type="Character" x="224" y="576" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_lucifer"/>
    <property name="onInteract" value="play('world3/lucifer02.lua')"/>
   </properties>
  </object>
  <object id="288" name="room" type="Ceiling" x="144" y="512">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="16,0 16,128 160,128 160,0"/>
  </object>
  <object id="289" name="npc" type="Character" x="400" y="624" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="EAST"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('The prince is a very learned man. Many of the innovations in the city are thanks to him.')"/>
   </properties>
  </object>
  <object id="290" name="npc" type="Character" x="368" y="672" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_mutant_f"/>
    <property name="face" value="WEST"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('I\'m researching Babel. If we could only get at the power source at Babel\'s core, we wouldn\'t need to mine for coal or plutonium.')"/>
   </properties>
  </object>
  <object id="291" name="npc" type="Character" x="192" y="672" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_guard"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="speak('Guard', 'Watch your step.')"/>
   </properties>
  </object>
  <object id="292" name="npc" type="Character" x="256" y="672" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_guard"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="speak('Guard', 'I have my eye on you.')"/>
   </properties>
  </object>
  <object id="293" name="npc" type="Character" x="272" y="672" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="speak('Guard', 'The palace is very secure.')"/>
   </properties>
  </object>
  <object id="294" name="npc" type="Character" x="176" y="672" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="speak('Guard', 'Don\'t try anything fishy.')"/>
   </properties>
  </object>
  <object id="295" name="room" type="Ceiling" x="304" y="544">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="16,0 16,192 144,192 144,0"/>
  </object>
  <object id="297" name="npc" type="Character" x="48" y="672" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_mutant_m"/>
    <property name="face" value="SOUTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('No one really remembers where the prince comes from, but he\'s brought wealth to the city.')"/>
   </properties>
  </object>
  <object id="298" name="npc" type="Character" x="80" y="672" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_f"/>
    <property name="face" value="SOUTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('Even if the prince is a \'master,\' why should we care?')"/>
   </properties>
  </object>
  <object id="299" name="npc" type="Character" x="64" y="624" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="NORTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('I don\'t know why we have to open the gate to Babel, but I trust the prince will make the right decisions for the city.')"/>
   </properties>
  </object>
  <object id="300" name="room" type="Ceiling" x="0" y="544">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="16,0 16,192 144,192 144,0"/>
  </object>
  <object id="301" name="chest" type="Chest" x="1488" y="464" width="16" height="16">
   <properties>
    <property name="collectable" value="stone_air"/>
   </properties>
  </object>
  <object id="302" name="shop" type="Character" x="784" y="64" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="shop('shop_world3_potions')"/>
   </properties>
  </object>
  <object id="303" name="shop" type="Character" x="720" y="64" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="shop('shop_city_weapons1')"/>
   </properties>
  </object>
  <object id="304" name="shop" type="Character" x="704" y="768" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="NORTH"/>
    <property name="onInteract" value="shop('shop_city_weapons2')"/>
   </properties>
  </object>
  <object id="305" name="shop" type="Character" x="656" y="768" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="NORTH"/>
    <property name="onInteract" value="shop('shop_city_armor')"/>
   </properties>
  </object>
  <object id="306" name="shop" type="Character" x="704" y="480" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="NORTH"/>
    <property name="onInteract" value="shop('shop_city_spells')"/>
   </properties>
  </object>
  <object id="307" name="room" type="Ceiling" x="1424" y="432">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="16,0 16,64 80,64 80,0"/>
  </object>
  <object id="309" name="chest" type="Chest" x="1200" y="736" width="16" height="16">
   <properties>
    <property name="item" value="spell_prayer"/>
   </properties>
  </object>
  <object id="310" name="room" type="Ceiling" x="1504" y="432">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="16,0 16,64 80,64 80,0"/>
  </object>
  <object id="311" name="room" type="Ceiling" x="1408" y="16">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="16,0 16,64 96,64 96,0"/>
  </object>
  <object id="312" name="room" type="Ceiling" x="1408" y="96">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="-16,-16 -16,64 96,64 96,-16"/>
  </object>
  <object id="313" name="npc" type="Character" x="144" y="208" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="play('world3/train_city_gate.lua')"/>
   </properties>
  </object>
  <object id="314" name="npc" type="Character" x="320" y="144" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="face" value="NORTH"/>
    <property name="onInteract" value="play('world3/train_city_ermengarde.lua')"/>
   </properties>
  </object>
  <object id="315" name="npc" type="Character" x="176" y="288" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="face" value="SOUTH"/>
    <property name="onInteract" value="speak('As a special guest of the prince, you may ride the monorail for free.')"/>
   </properties>
  </object>
  <object id="316" name="npc" type="Character" x="48" y="256" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_f"/>
    <property name="face" value="SOUTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('The monorail is wonderful! I can visit the power plant in less than a day\'s journey.')"/>
   </properties>
  </object>
  <object id="317" name="npc" type="Character" x="304" y="304" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_mutant_m"/>
    <property name="face" value="WEST"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('The monorail is relatively new. When construction finished last year, work began on the gate machine.')"/>
   </properties>
  </object>
  <object id="318" name="npc" type="Character" x="400" y="128" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="SOUTH"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('Energy from the power plant keeps the monorail going. Without power, all of our progress these past years would be useless.')"/>
   </properties>
  </object>
  <object id="319" name="npc" type="Character" x="240" y="64" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="face" value="EAST"/>
    <property name="onInteract" value="speak('Security is important! In the past, saboteurs have threatened to blow up the monorail.')"/>
   </properties>
  </object>
  <object id="320" name="room" type="Ceiling" x="112" y="16">
   <properties>
    <property name="roofID" value="137"/>
    <property name="roofTileset" value="lower"/>
   </properties>
   <polygon points="16,0 16,80 192,80 192,0"/>
  </object>
  <object id="321" name="trigger" type="Event" x="384" y="96" width="16" height="16">
   <properties>
    <property name="onCollide" value="sceneSwitch('upper_floor', true)"/>
   </properties>
  </object>
  <object id="323" name="trigger" type="Event" x="384" y="112" width="16" height="16">
   <properties>
    <property name="onCollide" value="sceneSwitch('upper_floor', false)"/>
   </properties>
  </object>
  <object id="324" name="block" type="Event" x="336" y="128" width="16" height="32">
   <properties>
    <property name="hide" value="return getSwitch('upper_floor')"/>
    <property name="passable" value="IMPASSABLE"/>
   </properties>
  </object>
  <object id="325" name="block" type="Event" x="352" y="128" width="16" height="32">
   <properties>
    <property name="hide" value="return not getSwitch('upper_floor')"/>
    <property name="passable" value="IMPASSABLE"/>
   </properties>
  </object>
 </objectgroup>
 <layer name="Tile Layer 3" width="100" height="54">
  <properties>
   <property name="z" value="2.0"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAC+3aMQrDMAwFUJ+9Y6DpAeLeNYGupcV2jBL7PfhTQMhDBgmlBAAAAER7BISPJbqBSv/6bn1Xj/rPI2thXsn/0ct2JBfmHdJpudz4Pbo+AADw3dkz/F13AlexXrzebM6eRc22AAAAzKT2noE+Rr5nAAAAAIBS7tz6qNkLt8RO+beavXBL7JQBgNHt4LYhBmBUAAA=
  </data>
 </layer>
 <layer name="Tile Layer 4" width="100" height="54">
  <properties>
   <property name="z" value="2.5"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAC+3aSwrAIAwFQHsIt97/mF0XFMEPTWDmAOEFV09SCgAAAADEUJ+/E6yZ5d7d6/b8kZb0PWa5d/e6PR8AACCD0100659AFKe7qG4LAAAAAAAAAADw5c4tFnduAAB9L5P5eZxgVAAA
  </data>
 </layer>
</map>
