<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" renderorder="right-down" width="36" height="43" tilewidth="16" tileheight="16">
 <properties>
  <property name="name" value="Forest Town"/>
 </properties>
 <tileset firstgid="1" source="../tilesets/lower.tsx"/>
 <tileset firstgid="113" source="../tilesets/upper.tsx"/>
 <layer name="Tile Layer 1" width="36" height="43">
  <properties>
   <property name="z" value="0"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAC+2TQQ7CIBBFIS5M6s7EBbuyUg+gLnr/e9kmkJCf+VAotS5m8ZKWlJlX+DMYYwZFURRFUZQCZ+Bonxtw1DnYsH6feQSeK2vZhv6lc4g1XzPvwOeH54N9LaFHr7Hy+7T/HnlOfVh9KT9WuMfePqy+lB8r3ONWFwc+bF5K+emV08XHZ/qy3PTMjwO80Bf3rM1Pi1d0iEjzg2ssP3i/Lblu8WH5Sddbc+0Mz+MU3ifimWNLhpf9l0Cpz14e6HMN1NbsPeeSD86chORU6jVW+KRgxhF0S/fV/Afzkcj5oNva/5DmF2H7cpn9Nx90k55r5+7UCU+eFUVRGF94T8RoMBgAAA==
  </data>
 </layer>
 <layer name="Tile Layer 2" width="36" height="43">
  <properties>
   <property name="z" value=".5"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAC+2WSw7DIAxEuXIPwSYLsu+qF0h6xSoSlkYW5mNwqFqeZJUGsKfYJt2dc/uyZcumWTBaqzVvtPafzSJvJZ+5eW+gqVQLuflQsX/ZdxhHyqfWf+1eWlejp6e2cC9q41BPXbyjOeOzQG2cAGPUg5patUlngf7IUnEvDhifMCb/mvNysJdi4+/PxZVAXxo9PP4oNLXcSyqPRGs9t/hvqZ+Unlwt5fKzKeJKSP1Tmx9tXIlU346ql5fwPFc/qCl1Pto+esSYm6Dnen6CLg+fUp56elrK48EXxvmau+cOPPveoucZbSSYg9JdeBd0RqWczWJ0n/eiuQetdFj0uhbNu8qSVN3M0kLwd9dscv85F4tf4gPz5afxMBgAAA==
  </data>
 </layer>
 <objectgroup name="Object Layer 1">
  <object name="friend" type="Character" x="304" y="544" width="16" height="16">
   <properties>
    <property name="appearance" value="lua(return getHero(1).getSpriteName())"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return getSwitch('opening_flashback') or (getSwitch('opening_talked_elder') and getSwitch('opening_talked_borg'))"/>
    <property name="onInteract" value="speak(getHero(1).getName() .. ':  You should talk to BORG and Elder before we leave.')"/>
   </properties>
  </object>
  <object name="friend" type="Character" x="320" y="528" width="16" height="16">
   <properties>
    <property name="appearance" value="lua(return getHero(2).getSpriteName())"/>
    <property name="face" value="WEST"/>
    <property name="hide" value="return getSwitch('opening_flashback') or (getSwitch('opening_talked_elder') and getSwitch('opening_talked_borg'))"/>
    <property name="onInteract" value="speak(getHero(2).getName() .. ':  ' .. getHero(0).getName() .. ', aren\'t you ready to go yet?')"/>
   </properties>
  </object>
  <object name="friend" type="Character" x="320" y="512" width="16" height="16">
   <properties>
    <property name="appearance" value="lua(return getHero(3).getSpriteName())"/>
    <property name="face" value="WEST"/>
    <property name="hide" value="return getSwitch('opening_flashback') or (getSwitch('opening_talked_elder') and getSwitch('opening_talked_borg'))"/>
    <property name="onInteract" value="speak(getHero(3).getName() .. ':  We\'ll wait for you here. Say your goodbyes, the journey starts today!')"/>
   </properties>
  </object>
  <object name="past_borg" type="Character" x="304" y="416" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="hide" value="return not getSwitch('opening_flashback')"/>
   </properties>
  </object>
  <object name="elder" type="Character" x="320" y="416" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_elder"/>
    <property name="hide" value="return not getSwitch('opening_flashback')"/>
   </properties>
  </object>
  <object name="clone" type="Character" x="128" y="448" width="16" height="16">
   <properties>
    <property name="appearance" value="lua(return getHero(0).getSpriteName())"/>
    <property name="hide" value="return not getSwitch('opening_flashback')"/>
   </properties>
  </object>
  <object name="jonas" type="Character" x="304" y="480" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_jonas"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return not getSwitch('opening_flashback')"/>
   </properties>
  </object>
  <object name="janine" type="Character" x="320" y="480" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_janine"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return not getSwitch('opening_flashback')"/>
   </properties>
  </object>
  <object type="Event" x="368" y="416" width="16" height="16">
   <properties>
    <property name="onCollide" value="teleport('world1/parish_interior.tmx', 24, 12)"/>
   </properties>
  </object>
  <object type="Event" x="272" y="416" width="16" height="16">
   <properties>
    <property name="onCollide" value="teleport('world1/parish_interior.tmx', 24, 31)"/>
   </properties>
  </object>
  <object type="Event" x="160" y="368" width="16" height="16">
   <properties>
    <property name="onCollide" value="teleport('world1/parish_interior.tmx', 3, 31)"/>
   </properties>
  </object>
  <object name="friend3" type="Character" x="320" y="496" width="16" height="16">
   <properties>
    <property name="appearance" value="lua(return getHero(1).getSpriteName())"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return (not (getSwitch('opening_talked_elder') and getSwitch('opening_talked_borg'))) or getSwitch('opening_finished')"/>
    <property name="onInteract" value="play('borg02.lua')"/>
   </properties>
  </object>
  <object name="friend1" type="Character" x="304" y="480" width="16" height="16">
   <properties>
    <property name="appearance" value="lua(return getHero(2).getSpriteName())"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return (not (getSwitch('opening_talked_elder') and getSwitch('opening_talked_borg'))) or getSwitch('opening_finished')"/>
    <property name="onInteract" value="play('borg02.lua')"/>
   </properties>
  </object>
  <object name="friend2" type="Character" x="320" y="480" width="16" height="16">
   <properties>
    <property name="appearance" value="lua(return getHero(3).getSpriteName())"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return (not (getSwitch('opening_talked_elder') and getSwitch('opening_talked_borg'))) or getSwitch('opening_finished')"/>
    <property name="onInteract" value="play('borg02.lua')"/>
   </properties>
  </object>
  <object name="borg" type="Character" x="368" y="416" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_robot"/>
    <property name="hide" value="return not getSwitch('opening_borg_visible')"/>
   </properties>
  </object>
  <object name="NPC" type="Character" x="48" y="432" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_slime"/>
    <property name="onInteract" value="speak('The tunnels outside town lead to a city on the river.')"/>
   </properties>
  </object>
  <object name="NPC" type="Character" x="128" y="352" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_mutant_f"/>
    <property name="face" value="WEST"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('Elder found BORG and fixed him up, but BORG\'s memory was wiped.')"/>
   </properties>
  </object>
  <object name="NPC" type="Character" x="160" y="464" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_mutant_m"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return getSwitch('opening_flashback')"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('Nobody but Elder remembers what it was like when Hero was a center of trade instead of a monster town.')"/>
   </properties>
  </object>
  <object name="NPC" type="Character" x="432" y="464" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="WEST"/>
    <property name="hide" value="return getSwitch('opening_flashback')"/>
    <property name="onInteract" value="speak('There are other towns across the river, but monsters make the journey dangerous.')"/>
   </properties>
  </object>
  <object name="NPC" type="Character" x="432" y="352" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_elf"/>
    <property name="face" value="NORTH"/>
    <property name="hide" value="return getSwitch('opening_flashback')"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('I once visited a city to the south. You can buy all sorts of arms and armor there.')"/>
   </properties>
  </object>
  <object name="NPC" type="Character" x="304" y="384" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_f"/>
    <property name="face" value="EAST"/>
    <property name="hide" value="return getSwitch('opening_flashback')"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('Friendly monsters are rare in these parts, but I hear they can be powerful allies.')"/>
   </properties>
  </object>
  <object name="NPC" type="Character" x="240" y="304" width="16" height="16">
   <properties>
    <property name="appearance" value="4dir_human_m"/>
    <property name="face" value="SOUTH"/>
    <property name="hide" value="return getSwitch('opening_flashback')"/>
    <property name="onBehavior" value="this.wander()"/>
    <property name="onInteract" value="speak('After Jonas and Janine left, we\'ve been counting on BORG to defend the town.')"/>
   </properties>
  </object>
  <object name="tele" type="Event" x="304" y="560" width="32" height="16">
   <properties>
    <property name="onCollide" value="teleport('world1/overworld.tmx', 12, 18)"/>
   </properties>
  </object>
 </objectgroup>
</map>
